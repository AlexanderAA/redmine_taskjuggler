<h2>Redmine Task Juggler Round-Trip Engeneering</h2>
<p>Welcome to Redmine_TaskJuggler.  This plugin helps with workload management.
<p>Help (to come)
<HR/>
<h2>round-trip with Task-Juggler</h2>
<p><form action="/taskjuggler/initial_export" method="get"><INPUT TYPE="SUBMIT" VALUE="EXPORT"/> a Task-Juggler 
 file from Redmine for <select name="project_id">
<% 
cust_field_tj_enabled = ProjectCustomField.find(:first, :conditions => { :name => "tj_enabled" }).id
@projects.each do |project| 
tj_enabled = project.custom_values.find(:first, :conditions => {:custom_field_id => cust_field_tj_enabled})
if project.active? and tj_enabled and not tj_enabled.value == "0"
%>
<OPTION VALUE="<%= project.id %>"><%= project.name %></OPTION>
<% 
end
end%>
</SELECT>
</FORM>
<p><form action="/taskjuggler/import" method="get" ><INPUT TYPE="SUBMIT" VALUE="IMPORT" onClick="return(confirm('Have you backed up your database ?'))"/> a CVS file (id, start, end, effort, duration, priority) located at <input type="texte" name="filepath" value="/tmp/import.csv"/>, generated by Task Juggler into the <select name="project_id">
<% 
@projects.each do |project| 
tj_enabled = project.custom_values.find(:first, :conditions => {:custom_field_id => cust_field_tj_enabled})
if project.active? and tj_enabled and not tj_enabled.value == "0"
%>
<OPTION VALUE="<%= project.id %>"><%= project.name %></OPTION>
<% 
end
end%>
</SELECT>  Redmine Project.
</FORM>
<HR/>
<H2>Workload associations</H2>
<FORM ACTION="/taskjuggler/timetable">
User : <SELECT NAME="user_id">
<%
@users.each do |user|
%>
<OPTION VALUE="<%= user.id%>"><%=user.name%></OPTION>
<%
end
%>
</SELECT><BR>
Date (aaaa-mm-dd) : <INPUT NAME="date"/>
<INPUT TYPE="SUBMIT"/>

</FORM>